# 千峰2401第一阶段测验查漏补缺

#### **奇奇怪怪的正则表达式**

^\<([a-z]+)\>.*\<\1\>$

#### **零散琐碎**

```
validate_password=off  [mysqld]下写入，表示简易密码

declare 用于声明各种变量

DNS用于解析域名，DCHP可以自动分配域名

SSH服务开启后可以用SCP直接远程拷贝文件

crontab计划任务命令，选项-u为用户相关，-l为查看当前计划任务，-e为创建新的计划任务（格式：分 时 日 月 周 执行命令代码）-r为删除任务

logrotate日志轮转命令，主配置文件为/etc/logrotate.conf

chattr设置文件各种属性

local $变量，声明一个局部变量（默认环境变量）

在/etc/rc.local中添加开机命令

mv ifcfg-ens33 ifcfg-eth0 修改网卡名称

grep -B 2 "keyword" file.txt在file.txt文件找keyword的前两行
```

#### **逻辑卷LVM的创建与扩展**

```
pvcreate创建物理卷	vgcreate创建卷组	lvcreate创建虚拟卷

vgextend扩展卷组	lvextend扩展虚拟卷

pvremove移除物理卷  vfremove移除卷组  lvremove移除虚拟卷
```

#### **最常用的raid级别:0、1、5、6，10:是 1和0 的组合**

```shell
raid0 ---数据条带卷
最少需要两块磁盘，分别往每一块磁盘上写一部分数据
优点:
1.读写速度快， 
2.磁盘利用率：100%
缺点:不提供数据冗余，无数据检验，不能保证数据的正确性，存在单点故障。

应用场景：
1）对数据完整性要求不高的场景，如：日志存储，个人娱乐
2）要求读写效率高，安全性能要求不高，如图像工作站 
============================================================================
raid1 又叫镜像raid，通过磁盘数据镜像实现数据冗余，在成对的独立磁盘上产生互为备份的数据。
一般需要两块磁盘，每块磁盘上都会存储一份完整数据。其数据安全性就会较高，但是磁盘空间利用率是比较低的。

优点:提供数据冗余，数据双倍存储安全性高支持容错。读速度快
缺点:写速度慢，无数据校验。磁盘利用率不高
磁盘利用率：50%

应用场景：
存放重要数据，如数据存储领域
===========================================================
raid5：RAID5应该是目前最常见的 RAID 等级，它的校验数据分布在阵列中的所有磁盘上。RAID5的磁盘上同时存储数据和校验数据。当一个数据盘损坏时，系统可以根据其他数据块和对应的校验数据来重建损坏的数据。　

raid5最少需要3块磁盘。
优点:
1.可以找回丢失的数据---数据可以通过校验计算得出，
2.冗余磁盘-->（需要4快磁盘将其中一块做热备）当某一块磁盘坏掉后，冗余磁盘会自动替换上去
3.有校验机制
4.读写速度高
5.磁盘利用率高
缺点：
1.磁盘越多安全性能越差

应用场景：安全性高，如金融、数据库、存储等。
==================================================
raid6：RAID6 等级是在 RAID5 的基础上为了进一步增强数据保护而设计的一种 RAID 方式。
最少需要四块磁盘，两块存校验位。RAID6引入双重校验的概念，它可以保护阵列中同时出现两个磁盘失效时，阵列仍能够继续工作，不会发生数据丢失。
优点：
1.容错：允许两块磁盘同时坏掉。读写快。
2.良好的随机读性能
3.有校验机制

缺点：
1.写入速度差
2.成本高

应用场景：对数据安全级别要求比较高的企业
===============================================
RAID10：先做镜像再作条带--也叫混合raid
优点：
1.较高的IO性能
2.有数据冗余
3.无单点故障
4.安全性能高
缺点：成本稍高
应用场景：
特别适用于既有大量数据需要存取，同时又对数据安全性要求严格的领域，如银行、金融、商业超市、仓储库房、各种档案管理等。
=======================================================
```

#### **Linux常用端口**

```
20/21	：FTP服务（20端口传输数据，21端口控制链接）
22	  	：SSH服务
23		：Telnet服务
53		：DNS域名解析
80		：HTTP的服务端口
111		：RPCbind端口
443		：HTTP的安全端口
3306	：Mysql\MariaDB默认端口
8080	：HTTP的代理服务器端口、Tomcat
9000	：php-fpm端口
27017	：MongoDB默认端口
```

#### **HTTP常见状态代码**

```
200 OK #客户端请求成功
403 Forbidden #服务器收到请求，但是拒绝提供服务,没有权限
404 Not Found #请求资源不存在，输入了错误的URL，没有找到，路径不对
```

#### **UDP协议简介**

```
UDP是一个无连接的简单的面向数据报的传输层协议。

UDP的特性:
1.面向无连接：不用先与对方建立连接，不握手。因此传输速度很快。
2.不可靠的：没有确认机制，它只是把应用程序传给IP层的数据报发送出去，但是并不能保证它们能到达目的地。
3.UDP传输数据时有大小限制，每个被传输的数据报必须限定在64KB之内
因为它不属于连接型协议，因而具有资源消耗小，处理速度快的优点，所以通常音频、视频和普通数据在传送时使用UDP较多，因为它们即使偶尔丢失一两个数据包，也不会对接收结果产生太大影响。
 
udp一般用于
1. 即时通信:qq聊天 对数据准确性和丢包要求比较低，但速度必须快
2. 在线视频:速度一定要快，保证视频连续，但是偶尔花了一个图像帧，人们还是能接受的
3. 网络语音电话:语音数据包一般比较小，需要高速发送，偶尔断音或串音也没问题
```

#### 静态路由和动态路由

路由器在转发数据时，需要先在路由表中查找相应的路由，有三种途径

> （1）直连路由：路由器自动添加和自己直连的路由
>
> （2）静态路由：管理员手动添加的路由
>
> （3）动态路由：由路由协议动态建立的路由

静态路由

> 缺点
> 	不能动态的反映网络拓扑，当网络发生变化的时候，管理员必须手动的改变路由
>
> 优点
> 	不会占用路由器太多的cpu和RAM资源，也不会占用太多带宽。

默认路由

>  (1) 实际上默认路由是一种特殊的静态路由，指的是当 路由表中与包的目的地址之间没有匹配的表项时，路由器能够做出选择。如果没有默认路由，那么目的地址在路由表中没有匹配表项的包将被丢弃。
>
>  (2)默认路由（Default route），如果IP数据包中的目的地址找不到存在的其它路由时，路由器会默认的选择的路由。
>
>  默认路由为0.0.0.0

动态路由

> 动态路由是与静态路由相对的一个概念，指路由器能够根据路由器之间的交换的特定路由信息自动地建立自己的路由表，并且能够根据链路和节点的变化适时地进行自动调整。当网络中节点或节点间的链路发生故障，或存在其它可用路由时，动态路由可以自行选择最佳的可用路由并继续转发报文。

#### **OSI七层模型**

```
物理层、链路层、网络层、传输层、会话层、表现层、应用层

网	络	层		|		主		机		层

应用层：针对应用约定的标准 HTTP（超文本传输协议） Telnet（远程协议）
表示层：约束数据格式，负责格式转化，加密。解密。
会话层：建立、维护、管理（解除）会话。数据的传输通道。
传输层：约定数据采用何种方式进行传递
TCP协议：传输控制协议，实现数据的可靠传输
UDP协议：用户数据报协议，实现数据的快递传输，不可靠
网络层：提供逻辑地址（IP地址，用于在网络中标识每一台设备，作用于网络间的通信，提供路由和选路）
数据链路层：提供MAC（物理）地址，每个MAC地址写在网卡上
物理层：约定接口类型，传输速度
```

#### TCP/IP四层模型

| TCP/IP四层模型 |    **OSI七层模型**     |                         主要协议                          |
| :------------: | :--------------------: | :-------------------------------------------------------: |
|     应用层     | 应用层、表示层、会话层 | HTTP、DNS、FTP、Telent、<br />DHCP、SSH、SMTP、POP3、IMAP |
|     传输层     |         传输层         |                         TCP、UDP                          |
|     网络层     |         网络层         |            IP、ARP、ICMP、RIP、OSPF、BGP、NAT             |
|   网络接口层   |   数据链路层、物理层   |                       NAC、CSMA/CD                        |

#### 系统调优参数

```
vim /etc/sysctl.conf

net.ipv4.ip_forward = 1
net.bridge.bridge-nf-call-iptables = 1
net.bridge.bridge-nf-call-ip6tables = 1
fs.may_detach_mounts = 1
vm.overcommit_memory = 1
vm.panic_on_oom = 0
fs.inotify.max_user_watches = 89100
fs.file-max = 52706963
fs.nr_open = 52706963
net.netfilter.nf_conntrack_max = 2310720
net.ipv4.tcp_keepalive_time = 600
net.ipv4.tcp_keepalive_probes = 3
net.ipv4.tcp_keepalive_intvl = 15
net.ipv4.tcp_max_tw_buckets = 36000
net.ipv4.tcp_tw_reuse = 1
net.ipv4.tcp_max_orphans = 327680
net.ipv4.tcp_orphan_retries = 3
net.ipv4.tcp_syncookies = 1
net.ipv4.tcp_max_syn_backlog = 16384
net.ipv4.ip_conntrack_max = 65536
net.ipv4.tcp_timestamps = 0
net.core.somaxconn = 16384
```

