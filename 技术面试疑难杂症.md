# 技术面试疑难杂症

#### mysql事务的两个阶段

MySQL中的事务是为了保证数据的一致性和完整性，它由多个操作组成，这些操作作为一个单独的单元来执行。事务有两个重要的阶段：

1. 事务开始前的阶段（提交前）：这个阶段通常被称为"预提交"阶段，在这里，事务的操作被记录在日志文件中，但是数据库的变更并没有立即应用到实际的表中。
2. 事务提交后的阶段：当事务提交时，所有在预提交阶段记录的变更都会被应用到数据库表中，之前的变更被永久保存。

#### bin-log日志的三种格式

SQL语句格式

数据行格式

混合格式

**覆盖索引**

覆盖索引(Covering Index)是一种优化查询性能的方法。当一个查询的所有列都直接包含在索引中时，我们称这个索引为覆盖索引。在这种情况下，MySQL可以直接从索引中获取信息，而不需要再去实际的数据表中查找，这可以极大地提高查询速度。

以下是覆盖索引可能使用的场景：

1. **查询只需要返回索引中的列**：这是覆盖索引的典型应用场景。例如，有一个用户表，包含用户ID和姓名，并对用户ID建立了索引。如果有一个查询只需要获取用户的ID，那么MySQL就可以直接返回索引中的数据，而不需要去访问表中的数据。
2. **查询的排序与索引顺序一致**：如果查询结果需要按照某个字段排序，而且这个字段建立了索引，那么MySQL可以直接使用索引的顺序返回结果，从而提高查询速度。
3. **在联接查询中**：如果在联接查询中，被联接的字段有索引，并且查询结果只需要返回索引中的字段，那么也可以使用覆盖索引。